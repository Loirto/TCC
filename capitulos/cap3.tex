\chapter{O vírus polimórfico}

Na época do MS-DOS os vírus eram simples e divididos em categorias básicas: BOOT-SECTOR, infectantes de arquivos .COM e infectantes de arquivos .EXE. Nesta época a vida também era relativamente fácil para os fabricantes de anti-vírus pois os vírus eram em menor número e a detecção era baseada em assinatura do código malicioso\footnote{A assinatura de um vírus é um padrão de bytes que identifica unicamente aquele vírus}. As atualizações dos anti-vírus eram em geral atualização da base de dados que continham as assinaturas, o tamanho e a forma de correção da infecção.

Um exemplo desta época é o vírus de boot-sector \textbf{Stoned}\footnote{http://en.wikipedia.org/w/index.php?title=Stoned\_\%28computer\_virus\%29\&oldid=532807447} que infectou muitos computadores no final da década de 1980. A assinatura mais óbvia para este vírus seria \textit{Your PC is now Stoned!} que o vírus exibia quando o computador estava inicializando. Portanto, um anti-virus da época precisaria apenas buscar esta string no registro de boot sector do disco rígido e dos disquetes que estivessem na unidade e, caso encontrasse, eliminar o vírus da memória - pois ele ficava residente infectando todo disquete que colocasse no computador - e em seguida substituir o boot sector pelo original que o vírus mantinha em outra localização do disco.

Algumas versões de vírus de boot sector eram um pouco mais inteligentes e assumiam controle da função de leitura de disco do BIOS. Assim, ao detectar que algum software estava tentando ler o boot sector, ele carregava a cópia original fazendo com que o anti-vírus não suspeitasse da existência da infecção. Logo, os desenvovedores de anti-vírus perceberam esta manobra e começaram a vasculhar a memória RAM do computador em busca de assinaturas de vírus e não mais somente em disco.

Também começaram a surgir cada vez mais vírus e a detecção por assinatura somente não estava mais dando certo pois novas variações do mesmo vírus tinham assinaturas diferentes. Por exemplo, o Stoned mencionado anteriormente teve muitas variações e buscar pela assinatura original não detectava mais o vírus pois a mensagem foi modificada. Então as empresas de anti-vírus começaram a desenvolver algorítmos que analisavam o código a fim de detectar certos padrões de execução (chamado código malicioso) que identificavam por certo um código que não deveria ser executado.

Então, os desenvolvedores de vírus perceberam que para evitar a detecção deveriam modificar a aparẽncia do código. Foi assim que surgiram os vírus polimórficos.
